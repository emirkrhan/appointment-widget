<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastra AI Chat Widget Ã–rneÄŸi</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #007bff;
            margin-bottom: 30px;
        }
        h2 {
            margin-top: 40px;
            color: #444;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        }
        .note {
            background-color: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 10px 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        .success {
            background-color: #f6ffed;
            border-left: 4px solid #52c41a;
            padding: 10px 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        .example-section {
            margin: 40px 0;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        button {
            padding: 8px 16px;
            margin-right: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-primary {
            background: #007bff;
            color: white;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– Mastra AI Chat Widget Entegrasyon Rehberi</h1>

    <div class="success">
        <strong>âœ… BaÅŸarÄ±lÄ± Entegrasyon:</strong> Widget artÄ±k Mastra Cloud API ile Ã§alÄ±ÅŸacak ÅŸekilde yapÄ±landÄ±rÄ±ldÄ±!
    </div>

    <p>Bu rehber, Mastra AI Chat Widget'Ä±nÄ±n web sitenize nasÄ±l entegre edileceÄŸini gÃ¶sterir.</p>

    <div class="note">
        <strong>ğŸš€ Yeni Ã–zellikler:</strong>
        <ul>
            <li>Mastra Cloud API entegrasyonu</li>
            <li>GerÃ§ek zamanlÄ± AI yanÄ±tlarÄ±</li>
            <li>Oturum yÃ¶netimi</li>
            <li>GeliÅŸmiÅŸ hata yakalama</li>
        </ul>
    </div>

    <h2>ğŸ“‹ Temel Entegrasyon</h2>

    <p>Web sitenize Mastra AI chat widget'Ä± eklemek iÃ§in, aÅŸaÄŸÄ±daki kodu sayfanÄ±zÄ±n <code>&lt;body&gt;</code> etiketinin kapanÄ±ÅŸÄ±ndan hemen Ã¶nce ekleyin:</p>

    <pre><code>&lt;!-- Mastra AI Chat Widget --&gt;
&lt;script&gt;
  window.ChatWidgetConfig = {
    title: 'AI Asistan',
    welcomeMessage: 'Merhaba! Size nasÄ±l yardÄ±mcÄ± olabilirim?',
    widgetId: 'my-website-ai',
    dbName: 'production_db',
    metadata: {
      page: window.location.pathname,
      userAgent: navigator.userAgent
    }
  };
&lt;/script&gt;
&lt;script src="https://appointment-widget-umber.vercel.app/widget/embed.js" async&gt;&lt;/script&gt;</code></pre>

    <h2>âš™ï¸ YapÄ±landÄ±rma SeÃ§enekleri</h2>

    <p>Widget'Ä± Ã¶zelleÅŸtirmek iÃ§in <code>window.ChatWidgetConfig</code> nesnesini kullanabilirsiniz:</p>

    <pre><code>window.ChatWidgetConfig = {
  // Widget baÅŸlÄ±ÄŸÄ±
  title: 'AI Asistan',

  // KarÅŸÄ±lama mesajÄ±
  welcomeMessage: 'Merhaba! Size nasÄ±l yardÄ±mcÄ± olabilirim?',

  // Widget kimliÄŸi (analytics iÃ§in)
  widgetId: 'my-website-ai',

  // VeritabanÄ± adÄ± (Mastra Cloud)
  dbName: 'production_db',

  // Ek meta veriler
  metadata: {
    page: window.location.pathname,
    userType: 'visitor',
    language: 'tr'
  }
};</code></pre>

    <h2>ğŸ”§ JavaScript API</h2>

    <p>Widget yÃ¼klendikten sonra, JavaScript API'sini kullanarak widget'Ä± kontrol edebilirsiniz:</p>

    <pre><code>// Widget'Ä± aÃ§
ChatWidget.open();

// Widget'Ä± kapat
ChatWidget.close();

// Widget'Ä± aÃ§/kapat
ChatWidget.toggle();

// YapÄ±landÄ±rmayÄ± gÃ¼ncelle
ChatWidget.setConfig({
  title: 'Yeni AI Asistan',
  welcomeMessage: 'GÃ¼ncellenmiÅŸ karÅŸÄ±lama mesajÄ±',
  dbName: 'new_database'
});</code></pre>

    <div class="example-section">
        <h2>ğŸ® CanlÄ± Test</h2>
        <p>Bu sayfada Mastra AI chat widget'Ä± zaten yÃ¼klÃ¼. SaÄŸ alt kÃ¶ÅŸedeki chat ikonuna tÄ±klayarak gerÃ§ek AI ile konuÅŸabilirsiniz.</p>
        <p>AÅŸaÄŸÄ±daki butonlarÄ± kullanarak widget'Ä± kontrol edebilirsiniz:</p>

        <button onclick="ChatWidget.open()" class="btn-primary">Widget'Ä± AÃ§</button>
        <button onclick="ChatWidget.close()" class="btn-secondary">Widget'Ä± Kapat</button>
        <button onclick="ChatWidget.toggle()" class="btn-success">AÃ§/Kapat</button>
    </div>

    <h2>ğŸ”— Mastra Cloud API Entegrasyonu</h2>

    <div class="note">
        <strong>API Endpoint:</strong> <code>https://white-screeching-school.mastra.cloud/api/agents/myAgent/generate</code>
        <br><br>
        Widget otomatik olarak bu endpoint'e POST isteÄŸi gÃ¶nderir ve AI yanÄ±tlarÄ±nÄ± alÄ±r.
    </div>

    <h3>ğŸ“Š GÃ¶nderilen Veri FormatÄ±:</h3>
    <pre><code>{
  "input": "KullanÄ±cÄ±nÄ±n mesajÄ±",
  "conversationId": "session_1752067890123_abc123def",
  "timestamp": "2025-07-09T13:28:56.000Z"
}</code></pre>

    <h3>ğŸ“¨ Beklenen YanÄ±t FormatÄ±:</h3>
    <pre><code>{
  "text": "AI'dan gelen yanÄ±t mesajÄ±",
  "usage": {
    "promptTokens": 502,
    "completionTokens": 25,
    "totalTokens": 527
  }
}</code></pre>

    <h2>ğŸ› ï¸ Hata AyÄ±klama</h2>

    <p>Widget'Ä±n dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in:</p>

    <ol>
        <li>TarayÄ±cÄ± geliÅŸtirici araÃ§larÄ±nÄ± aÃ§Ä±n (F12)</li>
        <li>Console sekmesine gidin</li>
        <li>Widget'ta bir mesaj gÃ¶nderin</li>
        <li>API isteklerini ve yanÄ±tlarÄ±nÄ± console'da gÃ¶rebilirsiniz</li>
    </ol>

    <div class="note">
        <strong>ğŸ” Debug LoglarÄ±:</strong> Widget, tÃ¼m API isteklerini ve yanÄ±tlarÄ±nÄ± console'a yazdÄ±rÄ±r. Production ortamÄ±nda bu loglarÄ± kaldÄ±rmayÄ± unutmayÄ±n.
    </div>

    <h2>ğŸ“± Mobil Uyumluluk</h2>

    <p>Widget otomatik olarak mobil cihazlara uyum saÄŸlar:</p>
    <ul>
        <li>768px ve altÄ±nda tam ekran moduna geÃ§er</li>
        <li>Dokunmatik etkileÅŸimleri destekler</li>
        <li>Responsive tasarÄ±m</li>
    </ul>

    <h2>ğŸ” GÃ¼venlik</h2>

    <div class="note">
        <strong>GÃ¼venlik NotlarÄ±:</strong>
        <ul>
            <li>Widget, sadece HTTPS Ã¼zerinden Ã§alÄ±ÅŸÄ±r</li>
            <li>CORS gÃ¼venlik politikalarÄ± uygulanÄ±r</li>
            <li>API anahtarlarÄ± frontend'de saklanmaz</li>
            <li>TÃ¼m iletiÅŸim ÅŸifrelenir</li>
        </ul>
    </div>

    <!-- Mastra AI Chat Widget -->
    <script>
      window.ChatWidgetConfig = {
        title: 'Mastra AI Asistan',
        welcomeMessage: 'Merhaba! Ben bir AI asistanÄ±m. Size nasÄ±l yardÄ±mcÄ± olabilirim?',
        widgetId: 'example-mastra-ai',
        dbName: 'example_db',
        metadata: {
          page: 'example.html',
          version: '2.0.0',
          integration: 'mastra-cloud'
        }
      };
    </script>
    <script src="embed.js" async></script>
</body>
</html>